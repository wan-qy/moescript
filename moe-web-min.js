var moescript=function(){var n={};var r=function(){};r.prototype={constructor:undefined,toString:undefined,valueOf:undefined,hasOwnProperty:undefined,propertyIsEnumerable:undefined};var t=Object.craate?Object.create:function(){var n=function(){};return function(r){n.prototype=r;return new n}}();var e=function(){var n={}.hasOwnProperty;return function(r,t){return n.call(r,t)}}();var u=function(){var n=Array.prototype.slice;return function(r,t,e){return n.call(r,t,e)}}();var i=function(n){if(!n.length)return n;var r=n.slice(0).sort();var t=[r[0]],e=1;for(var u=1;u<r.length;u++)if(r[u]&&r[u]!=r[u-1])t[e++]=r[u];return t};var o=function(){};o.prototype=new r;o.fetch=function(n,r){if(e(n,r))return n[r]};var c=function(n){var r=new o,t=n.length;for(var e=0;e<t;e+=2)r[n[e]]=n[e+1];return r};var a=function(){return new o};var f=function(n,r){var t=new o;t[n]=r;return t};var s=function(n,r,t,e){var u=new o;u[n]=r;u[t]=e;return u};var v=function(n,r,t,e,u,i){var c=new o;c[n]=r;c[t]=e;c[u]=i;return c};var l=function(n,r,t,e,u,i,c,a){var f=new o;f[n]=r;f[t]=e;f[u]=i;f[c]=a;return f};var h=function(n){if(n instanceof o)return n;else return new o};var p=function(n,r){return r.be(n)};var g=function(n,r){return r.convertFrom(n)};var m=function(n){return{be:function(r){return n.contains(r)}}};var d=function(n){throw n||"[?] Unexpected error"};var y=function(n){return-n};var b=function(n){return!n};var O={"return":function(n){return n},bindYield:function(){return arguments[0].apply(arguments[1],u(arguments,2))},bind:function(n,r){return r(n)},"try":function(){throw"Try/Catch is not supported in this monadic schemata"},resend:function(n,r){var e=t(this);e["return"]=r;return n(e)()}};var E=function(n){if(n.getEnumerator){return n.getEnumerator()}else if(n instanceof Array){var r=n.slice(0);var t=0;var e=r.length;var u=t;var i={active:true};i.emit=function(){if(u>=e){i.active=false;return}else{return r[u++]}};i.each=function(n){for(var u=t;u<e;u++)n(r[u])};return i}else{throw new Error("Unable to get enumerator of "+n)}};var N=function(n,r){return new S(n,r)};var A=function(n,r){return new w(n,r)};var S=function(n,r){this.left=n;this.right=r};S.prototype.getEnumerator=function(){var n=this.left;var r=this.right;var t=n;var e={active:true};e.emit=function(){if(t>=r){e.active=false;return t}else{return t++}};e.each=function(t){for(var e=n,u=r;e<u;e++)t(e)};return e};var w=function(n,r){this.left=n;this.right=r};w.prototype.getEnumerator=function(){var n=this.left;var r=this.right;var t=n;var e={active:true};e.emit=function(){if(t>r){e.active=false;return t}else{return t++}};e.each=function(t){for(var e=n,u=r;e<=u;e++)t(e)};return e};n.runtime={CNARG:h,SLICE:u,THROW:d,NEGATE:y,NOT:b,IN:m,IS:p,AS:g,ExclusiveRange:N,InclusiveRange:A,NamedArguments:o,NARGS:c,NARGS0:a,NARGS1:f,NARGS2:s,NARGS3:v,NARGS4:l,GETENUM:E};n.derive=t;n.Nai=r;n.MONAD_SCHEMATA_M=O;n.OWNS=e;n.UNIQ=i;return n}();moescript.prelude=function(){var n={};var r=moescript;var t=r.derive;var e=r.Nai;var u=function(r,t){n[r]=t};u("derive",t);u("NamedArguments",r.runtime.NamedArguments);u("JSON",function(){return this}().JSON);u("endl","\n");u("global_",function(){return this}());u("operator",{add:function(n,r){return n+r},addf:function(n,r){return n-0+(r-0)},concat:function(n,r){return""+n+r},minus:function(n,r){return n-r},times:function(n,r){return n*r},divide:function(n,r){return n/r},mod:function(n,r){return n%r},shl:function(n,r){return n<<r},shr:function(n,r){return n>>r},shrf:function(n,r){return n>>>r},band:function(n,r){return n&r},bor:function(n,r){return n|r},bnot:function(n,r){return~n},bxor:function(n,r){return n^r},and:function(n,r){return n&&r},or:function(n,r){return n||r}});u("math",function(){var n=t(Math);n.randInt=function(n,r){if(arguments.length<2){r=n;n=0}return Math.floor(n+Math.random()*(r-n))};return n}());var i=function(n,r){var t=function(){};t.prototype=n;var e=function(){if(this instanceof t){var n=this}else{var n=new t}r.apply(n,arguments);return n};e.new=e;e.prototype=n;return e};var o=function(n){return i({},n)};o.of=function(n){return typeof n};o.outof=function(n){return function(r){return i(typeof n==="function"?new n:t(n),r)}};o.inherits=function(n){return function(r){return o.outof(n)(function(){debugger;if(typeof n==="function")n.apply(this,arguments);return r.apply(this,arguments)})}};u("type",o);u("outof",o.outof);u("inherits",o.inherits);u("debugger",function(){debugger});u("object",function(n,r){var e;if(!r){e={};r=n}else if(n instanceof Function){e=function(){return n.apply(this,arguments)}}else{e=t(n)}r.call(e);return e});u("seq",function(){return arguments[arguments.length-1]});var c=function(n,r){var t=function(){return n.apply(this,arguments)};t.prototype=n.prototype;t.be=function(r){return r instanceof n};t.formMatch=function(n,r){return function(e){if(t.be(e))return n(e);else return r(e)}};if(r)r.call(t,n,t);t.__=n;t.toString=function(){return"function () { [Moe Wrapped Native Type] }"};return t};u("_Object",Object);u("Object",c(Object,function(){this.be=function(n){return n!==undefined};this.getPrototypeOf=Object.getPrototypeOf;this.getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;this.getOwnPropertyNames=Object.getOwnPropertyNames;this.create=Object.create;this.defineProperty=Object.defineProperty;this.defineProperties=Object.defineProperties;this.seal=Object.seal;this.freeze=Object.freeze;this.preventExtensions=Object.preventExtensions;this.isSealed=Object.isSealed;this.isFrozen=Object.isFrozen;this.isExtensible=Object.isExtensible;this.keys=Object.keys}));u("Array",c(Array,function(){this.formMatch=function(n,r){return function(t){if(t instanceof Array&&t.length>=n.length-1){return n.apply(null,t.slice(0,n.length-1).concat([t.slice(n.length-1)]))}else{return r(t)}}};this.isArray=this.be}));u("Function",c(Function));u("Number",c(Number,function(){this.be=function(n){return typeof n==="number"||n instanceof Number};this.convertFrom=function(n){return n-0}}));u("Boolean",c(Boolean,function(){this.be=function(n){return n===true||n===false};this.convertFrom=function(n){return!!n}}));u("String",c(String,function(){this.be=function(n){return typeof n==="string"||n instanceof String};this.convertFrom=function(n){return n+""}}));u("Error",c(Error));u("Date",Date);u("RegExp",c(RegExp,function(){var n=this;n.convertFrom=function(n){return RegExp(n)};var r=function(r){n[r]=function(n){return RegExp(n,r)};n[r].convertFrom=function(n){return RegExp(n,r)}};r("g");r("i");r("m");r("gi");r("gm");r("im");r("gim");n.walk=function(n,r,t,e){var u=n.lastIndex;n.lastIndex=0;t=t||function(){};e=e||function(){};var i,o=0;while(i=n.exec(r)){if(o<i.index)e(r.slice(o,i.index));if(t.apply(this,i))e.apply(this,i);o=n.lastIndex}if(o<r.length)e(r.slice(o));n.lastIndex=u;return r}}));u("Primitive",function(){var n=function(){};var r=function(){var n=function(n){var r=n.charCodeAt(0);return"\\x"+(r>15?r.toString(16):"0"+r.toString(16))};return function(r){return'"'+(r||"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/[\x00-\x1f\x7f]/g,n).replace(/<\/(script)>/gi,"</$1>")+'"'}}();n.be=function(n){return!n||typeof n==="number"||typeof n==="string"||typeof n==="boolean"};n.stringify=function(n){if(typeof n==="string")return r(n);else return""+n};return n}());if(typeof console==="undefined"){console={log:function(){}}}var a=function(n){var r="";for(var t=0;t<arguments.length;t++)r+=arguments[t];console.log(r);return arguments[arguments.length-1]};if(typeof process!=="undefined"&&process.stderr){a=function(n){var r="";for(var t=0;t<arguments.length;t++)r+=arguments[t];process.stderr.write(r+"\n");return arguments[arguments.length-1]}}u("trace",a);u("instanceof",function(n){return{be:function(r){return r instanceof n}}});u("keysof",Object.keys||function(){var n=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable("toString"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=t.length;return function(u){if(typeof u!="object"&&typeof u!="function"||u===null)throw new TypeError("Object.keys called on a non-object");var i=[];for(var o in u){if(n.call(u,o))i.push(o)}if(r){for(var c=0;c<e;c++){if(n.call(u,t[c]))i.push(t[c])}}return i}}());u("defaultMonadSchemata",r.MONAD_SCHEMATA_M);(function(){var t=r.runtime;var e;var u=t.CNARG;var i=t.SLICE;var o=t.THROW;var c=t.NEGATE;var a=t.NOT;var f=t.IN;var s=t.IS;var v=t.AS;var l=t.ExclusiveRange;var h=t.InclusiveRange;var p=t.NamedArguments;var g=t.NARGS;var m=t.NARGS0;var d=t.NARGS1;var y=t.NARGS2;var b=t.NARGS3;var O=t.NARGS4;var E=t.GETENUM;var N=n;var A=r;var S=[];var w={};var j,R,x,M,G,I,P,T,F,_,k,C,D,Y,U,W,z,H,$,B,L,q,J,Q,Z,K,V,X,nr,rr,tr,er,ur,ir,or,cr,ar,fr,sr,vr,lr,hr,pr,gr,mr,dr,yr,br,Or;z=N.derive;_=N.Object;P=N.Function;or=N.object;J=N.global_;k=N.Primitive;j=N.Array;x=N.Date;rr=N.keysof;D=N.RegExp;Or=N.type;K=N["instanceof"];ir=N.math;T=A.MONAD_SCHEMATA_M;F=A.OWNS;B=function(n){return function(r){return N[n]=r}};V=B("its")(function(n){return function(r){return r[n]}});lr=B("returns")(function(n){return function(){return n}});X=B("itself")(function(n){return n});U=B("compose")(function(n,r){return function(){var t=this;var e=i(arguments,0);return n(r.apply(t,e))}});H=B("doon")(function(n,r){return r.call(n)});yr=B("tee")(function(n,r){r.call(n,n);return n});tr=B("list")(or(function(){var n=this;var r;n.car=function(n){return n[0]};n.cdr=function(n){return n.slice(1)};n.initial=function(n){return n.slice(0,-1)};n.last=function(n){return n[n.length-1]};r=function(n,r){return n.concat(r)};n.flat=function(n){return n.reduce(r,[])};n.fill=function(n,r){return mr({build:function(t){return function(){var e,u,i,o,c,a;var f;e=function(){o=n;return t.bind(o,c)};c=function(n){f=n;return u(r)};u=function(n){return t["return"](n)};return e}}})};n.tolist=function(n){return mr({build:function(r){return function(){var t,e,u,i,o,c;var a;t=function(){i=n;return r.bind(i,o)};o=function(n){a=n;return e(a)};e=function(n){return r["return"](n)};return t}}})};return n.shuffle=function(n){var r;var t,e,u,i;t=n.slice(0);for(e=0,r=t.length;e<r;e=e+1){u=ir.randInt(e,t.length);i=t[e];t[e]=t[u];t[u]=i}return t}}));ar=B("pcl")(function(n){var r=i(arguments,0);var t;t=r.slice(1);return function(){var r=this;var e=i(arguments,0);return n.apply(r,t.concat(e))}});fr=B("pcr")(function(n){var r=i(arguments,0);var t;t=r.slice(1);return function(){var r=this;var e=i(arguments,0);return n.apply(r,e.concat(t))}});br=B("time")(function(n,r){var t,e;e=new x;r.apply(null,n);t=new x;return t-e});(function(){var n,r,t,e;t=/^[a-zA-Z_$][\w$]*$/;e=function(n){return t.test(n)?n:k.stringify(n)};r=function(r,t,u,i){var o,c;var a,f,s,v,l;a=[];for(v=(o=E(rr(r))).emit();o.active;v=o.emit()){l=r[v];f=false;for(s=(c=E(t)).emit();c.active;s=c.emit()){if(s===l){f=true;break}}if(f){a.push(e(v)+": "+"[Circular]")}else{a.push(e(v)+": "+n(l,t,u+1,i))}}return u===0?" "+a.join(",\n  ")+" ":a.join(", ")};n=function(n,t,e,u){if(e>=u){return"[...]"}else{if(s(n,k)){return k.stringify(n)}else{if(s(n,P)){return"{ [Function]\n "+r(n,t.concat([n]),e,u)+"}"}else{return"["+r(n,t.concat([n]),e,u)+"]"}}}};return Z=B("inspect")(function(r,t){var e=i(arguments,0);if(e.length<2){t=3}return n(r,[],0,t)})})();$=B("enumeration")(function(n){return function(){var r=this;var t=i(arguments,0);var e,u,o;e={emit:function(){var n=this;var r=i(arguments,0);return u.apply(n,r)},active:true};(function(){var r,t,c;c=function(n){e.active=false;return n};r=function(n,r){u=r;return n};t=function(n,t,e,u){var o=i(arguments,0);return r(n.call(t,e),o[o.length-1])};return o=n.build({"return":c,bind:r,bindYield:t})})();u=o.apply(r,t);return e}});$.yield=function(n){return n};I=B("Enumerable")(function(n){return function(){var r=this;var t=i(arguments,0);var e,u,o;o=r;e=t;u=function(){var r,t,u;r={emit:function(){var n=this;var r=i(arguments,0);return t.apply(n,r)},active:true};(function(){var e,o,c;c=function(n){r.active=false;return n};e=function(n,r){t=r;return n};o=function(n,r,t,u){var o=i(arguments,0);return e(n.call(r,t),o[o.length-1])};return u=n.build({"return":c,bind:e,bindYield:o})})();t=u.apply(o,e);return r};return{getEnumerator:u}}});q=B("getEnumeratorOf")(A.runtime.GETENUM);vr=B("rangeForEach")(function(n,r){var t,e;t=q(n);if(t.each){return t.each(r)}else{e=t.emit();while(!t.stop){r(e);e=t.emit()}}});dr=B("takeWhile")(I({build:function(n){return function(r,t){var u,i,o,c,a,f,s,v,l,h;var p;i=function(){p=(u=E(r)).emit();return a()};a=function(){if(!u.active){return f()}if(!!t(p)){return s()}return o(e)};s=function(){v=p;return n.bind(v,l)};l=function(n){p=u.emit();return a()};f=function(){return o()};o=function(r){return n["return"](r)};return i}}}));hr=B("select")(I({build:function(n){return function(r,t){var e,u,i,o,c,a,f,s,v,l;var h;u=function(){h=(e=E(r)).emit();return c()};c=function(){if(!e.active){return a()}if(!t(h)){return f()}s=h;return n.bind(s,v)};v=function(n){return f()};f=function(){h=e.emit();return c()};a=function(){return i()};i=function(r){return n["return"](r)};return u}}}));cr=B("pairsof")(I({build:function(n){return function(r){var t,e,u,i,o,c,a,f,s;var v;e=function(){v=(t=E(rr(r))).emit();return o()};o=function(){if(!t.active){return c()}a=[r[v],v];return n.bind(a,f)};f=function(n){v=t.emit();return o()};c=function(){return u([])};u=function(r){return n["return"](r)};return e}}}));mr=B("table")(function(n){var r=this;var t=i(arguments,0);var u,o;u=[];o=or(T,function(){var n=this;n["return"]=function(n){var r;if((r=n)===e){}else{return u.push(n)}};return n.bind=function(n,r){return vr(n,r)}});n.build(o).apply(r,t)();return u});Q=B("hash")(function(n){var r;var t,e;t={};for(e=(r=E(n)).emit();r.active;e=r.emit()){t[e[0]]=t[e[1]]}return t});C=function(n,r){return function(t,u){if(t){return r(t,e)}else{return n(null,u)}}};W=function(n,r){var t=i(arguments,0);var u;if(t.length<2){r=n}u=z(T);u.bind=function(r,t){return r(function(r,u){var i;if(r){return n(r,e)}else{try{return t(u)}catch(o){i=o;return n(i,e)}}})};u.bindYield=function(r,t){var u=i(arguments,0);var o,c;c=function(r,t){var u;if(r){return n(r,e)}else{try{return o(t)}catch(i){u=i;return n(u,e)}}};o=u[u.length-1];return r.apply(t,u.slice(2,-1).concat([c]))};u["try"]=function(t,u,i){var o,c,a,f,s;a=function(n,r){var t;if(n){try{return u(o)(n)}catch(c){t=c;return f(t,e)}}else{return i(r)}};s=W(a,r);f=function(r,t){if(r){return n(r,e)}else{return i(t)}};o=W(f,r);try{return t(s)()}catch(v){c=v;return a(c,e)}};u["return"]=function(r){return n(null,r)};return u};Y=B("async")(function(n){if(n.build){return function(){var r=this;var t=i(arguments,0);var e,u,o;e=t.slice(0,-1);o=r;u=t[t.length-1];return n.build(W(u)).apply(o,e)()}}else{return function(){var r=this;var t=i(arguments,0);var u,o,c,a,f;f=r;u=t.slice(0,-1);a=t[t.length-1];try{c=n.apply(f,u)}catch(s){o=s;return a(o,e)}return a(null,c)}}});Y.defaultReaction=function(n,r){if(n){return o(n)}else{return r}};gr=B("start")(function(n){var r=this;var t=i(arguments,0);return n.apply(r,t.slice(1).concat([Y.defaultReaction]))});nr=B("join")(function(n,r){var t,u,i,o,c,a;o=0;c=0;u=false;a=s(n,j)?[]:{};t=function(n){var t,i;i=function(t){a[n]=t;c=c+1;if(!u&&c>=o){return r(null,a)}};t=function(n){u=true;return r(n,e)};return C(i,t)};i=_.keys(n);if(!i.length){r(null,a)}o=i.length;return vr(i,function(r){a[r]=e;return n[r](t(r))})});sr=B("qjoin")(Y({build:function(n){return function(r,t){var e,u,i,o,c,a,f,s,v,l;var h,p;o=function(){p=[];for(h=0,e=r;h<e;h=h+1){p[h]=[]}for(h=0,u=t.length;h<u;h=h+1){p[h%r].push(t[h])}for(h=0,i=r;h<i;h=h+1){(function(){var n;n=p[h];return p[h]=Y({build:function(r){return function(){var t,e,u,i,o,c,a,f,s,v;var l;e=function(){l=0,t=n.length;return o()};o=function(){if(!(l<t)){return c()}a=n;f=l;return r.bindYield(a[f],a,s)};s=function(n){l=l+1;return o()};c=function(){return u()};u=function(n){return r["return"](n)};return e}}})})()}f=nr;s=p;return n.bindYield(f,null,s,v)};v=function(n){return c(n)};c=function(r){return n["return"](r)};return o}}}));pr=B("sleep")(function(n,r){return J.setTimeout(function(){return r()},n)});ur=function(n){var r,t;r=function(n){return e};t=or(T,function(){var n=this;return n.bindYield=function(n,t,e,u){var n;u();r=n.formMatch.call(t,e,r)}});n.build(t)()();return r};er=B("match")(function(n,r){return!r?ur(n):ur(r)(n)});L=B("extractor")(function(n){var r;r=n(function(){return true},function(){return false});r.formMatch=n;r.be=r;return r});R=B("Both")(function(){var n=i(arguments,0);var r;r=n;return L(function(n,t){return r.reduceRight(function(n,r){var r;return r.formMatch(n,t)},n)})});M=B("Either")(function(){var n=i(arguments,0);var r;r=n;return L(function(n,t){return r.reduceRight(function(r,t){var t;return t.formMatch(n,r)},t)})});G=B("empty")(B("Empty")(L(function(n,r){return function(t){return!t||s(t,j)&&!t.length?n(t):r(t)}})))})();return n}();