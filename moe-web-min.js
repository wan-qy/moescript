var moescript=function(){var r={};var n=function(){};n.prototype={constructor:undefined,valueOf:undefined,hasOwnProperty:undefined,propertyIsEnumerable:undefined};var t=Object.craate?Object.create:function(){var r=function(){};return function(n){r.prototype=n;return new r}}();var t=t;var e=function(){var r={}.hasOwnProperty;return function(n,t){return r.call(n,t)}}();var u=function(){var r=Array.prototype.slice;return function(n,t,e){return r.call(n,t,e)}}();var i=function(r){if(!r.length)return r;var n=r.slice(0).sort();var t=[n[0]],e=1;for(var u=1;u<n.length;u++)if(n[u]&&n[u]!=n[u-1])t[e++]=n[u];return t};var o=function(){};var o=o;o.prototype=new n;o.fetch=function(r,n){if(e(r,n))return r[n]};var a=function(r){var n=new o,t=r.length;for(var e=0;e<t;e+=2)n[r[e]]=r[e+1];return n};var f=function(){return new o};var c=function(r,n){var t=new o;t[r]=n;return t};var s=function(r,n,t,e){var u=new o;u[r]=n;u[t]=e;return u};var v=function(r,n,t,e,u,i){var a=new o;a[r]=n;a[t]=e;a[u]=i;return a};var l=function(r,n,t,e,u,i,a,f){var c=new o;c[r]=n;c[t]=e;c[u]=i;c[a]=f;return c};var h=function(r){if(r instanceof o)return r;else return new o};var p=function(){return this}();var g=function(r,n,t){return n[t](r)};var y=function(r,n){this.values=r;this.restart=n};var m=function(r){this.value=r};var d={"return":function(r){return r},bindYield:function(){return arguments[0].apply(arguments[1],u(arguments,2))},bind:function(r,n){return n(r)}};var b=function(r){throw r||"[?] Unexpected error"};var E=function(r){return-r};var w=function(r){return!r};var A=function(r,n){return n.be(r)};var O=function(r,n){return n.convertFrom(r)};var N=function(r,n,e){if(r.build){var u=t(n);u["return"]=e;return r.build(u)()()}else{return e(r())}};var T=function(r){if(r.getEnumerator){return r.getEnumerator()}else if(r instanceof Array){var n=r.slice(0);var t=0;var e=n.length;var u=t;var i={active:true};i.emit=function(){if(u>=e){i.active=false;return}else{return n[u++]}};i.each=function(r){for(var u=t;u<e;u++)r(n[u])};return i}else{throw new Error("Unable to get enumerator of "+r)}};var S=function(r){return{be:function(n){return r.contains(n)}}};if(!Array.prototype.map){Array.prototype.map=function(r){"use strict";if(this===void 0||this===null)throw new TypeError;var n=Object(this);var t=n.length>>>0;if(typeof r!=="function")throw new TypeError;var e=new Array(t);var u=arguments[1];for(var i=0;i<t;i++){if(i in n)e[i]=r.call(u,n[i],i,n)}return e}}if(!Array.prototype.some){Array.prototype.some=function(r){"use strict";if(this===void 0||this===null)throw new TypeError;var n=Object(this);var t=n.length>>>0;if(typeof r!=="function")throw new TypeError;var e=arguments[1];for(var u=0;u<t;u++){if(u in n&&r.call(e,n[u],u,n))return true}return false}}if(!Array.prototype.reduce){Array.prototype.reduce=function(r){"use strict";if(this===void 0||this===null)throw new TypeError;var n=Object(this);var t=n.length>>>0;if(typeof r!=="function")throw new TypeError;if(t==0&&arguments.length==1)throw new TypeError;var e=0;var u;if(arguments.length>=2){u=arguments[1]}else{do{if(e in n){u=n[e++];break}if(++e>=t)throw new TypeError}while(true)}while(e<t){if(e in n)u=r.call(undefined,u,n[e],e,n);e++}return u}}if(!Array.prototype.reduceRight){Array.prototype.reduceRight=function(r){"use strict";if(this===void 0||this===null)throw new TypeError;var n=Object(this);var t=n.length>>>0;if(typeof r!=="function")throw new TypeError;if(t===0&&arguments.length===1)throw new TypeError;var e=t-1;var u;if(arguments.length>=2){u=arguments[1]}else{do{if(e in this){u=this[e--];break}if(--e<0)throw new TypeError}while(true)}while(e>=0){if(e in n)u=r.call(undefined,u,n[e],e,n);e--}return u}}if(!Array.prototype.every){Array.prototype.every=function(r){"use strict";if(this===void 0||this===null)throw new TypeError;var n=Object(this);var t=n.length>>>0;if(typeof r!=="function")throw new TypeError;var e=arguments[1];for(var u=0;u<t;u++){if(u in n&&!r.call(e,n[u],u,n))return false}return true}}if(!Array.prototype.filter){Array.prototype.filter=function(r){"use strict";if(this===void 0||this===null)throw new TypeError;var n=Object(this);var t=n.length>>>0;if(typeof r!=="function")throw new TypeError;var e=[];var u=arguments[1];for(var i=0;i<t;i++){if(i in n){var o=n[i];if(r.call(u,o,i,n))e.push(o)}}return e}}if(!Array.prototype.forEach){Array.prototype.forEach=function(r){"use strict";if(this===void 0||this===null)throw new TypeError;var n=Object(this);var t=n.length>>>0;if(typeof r!=="function")throw new TypeError;var e=arguments[1];for(var u=0;u<t;u++){if(u in n)r.call(e,n[u],u,n)}}}var R=function(r,n){return new M(r,n)};var j=function(r,n){return new _(r,n)};var M=function(r,n){this.left=r;this.right=n};M.prototype.getEnumerator=function(){var r=this.left;var n=this.right;var t=r;var e={active:true};e.emit=function(){if(t>=n){e.active=false;return t}else{return t++}};e.each=function(t){for(var e=r,u=n;e<u;e++)t(e)};return e};var _=function(r,n){this.left=r;this.right=n};_.prototype.getEnumerator=function(){var r=this.left;var n=this.right;var t=r;var e={active:true};e.emit=function(){if(t>n){e.active=false;return t}else{return t++}};e.each=function(t){for(var e=r,u=n;e<=u;e++)t(e)};return e};r.runtime={CNARG:h,M_TOP:p,MONAD_SCHEMATA_M:d,OWNS:e,RETURNVALUE:m,RMETHOD:g,SLICE:u,THROW:b,NEGATE:E,NOT:w,IN:S,IS:A,AS:O,SCHEMATA_BLOCK:N,UNIQ:i,YIELDVALUE:y,RANGE_EX:R,RANGE_INCL:j,NamedArguments:o,NARGS:a,NARGS0:f,NARGS1:c,NARGS2:s,NARGS3:v,NARGS4:l,GET_ENUM:T};r.derive=t;r.Nai=n;return r}();moescript.prelude=function(){var r={};var n=moescript;var t=n.derive;var e=n.Nai;var u=function(n,t){r[n]=t};u("derive",t);u("NamedArguments",n.runtime.NamedArguments);u("JSON",function(){return this}().JSON);u("endl","\n");u("global_",function(){return this}());u("operator",{add:function(r,n){return r+n},addf:function(r,n){return r-0+(n-0)},concat:function(r,n){return""+r+n},minus:function(r,n){return r-n},times:function(r,n){return r*n},divide:function(r,n){return r/n},mod:function(r,n){return r%n},shl:function(r,n){return r<<n},shr:function(r,n){return r>>n},shrf:function(r,n){return r>>>n},band:function(r,n){return r&n},bor:function(r,n){return r|n},bnot:function(r,n){return~r},bxor:function(r,n){return r^n},and:function(r,n){return r&&n},or:function(r,n){return r||n}});u("math",function(){var r=t(Math);r.randInt=function(r,n){if(arguments.length<2){n=r;r=0}return Math.floor(r+Math.random()*(n-r))};return r}());var i=function(r,n){var t=function(){};t.prototype=r;var e=function(){if(this instanceof t){var r=this}else{var r=new t}n.apply(r,arguments);return r};e.new=e;e.prototype=r;return e};var o=function(r){return i({},r)};o.of=function(r){return typeof r};o.outof=function(r){return function(n){return i(typeof r==="function"?new r:t(r),n)}};o.inherits=function(r){return function(n){return o.outof(r)(function(){debugger;if(typeof r==="function")r.apply(this,arguments);return n.apply(this,arguments)})}};u("type",o);u("outof",o.outof);u("inherits",o.inherits);u("debugger",function(){debugger});u("object",function(r,n){var e;if(!n){e={};n=r}else if(r instanceof Function){e=function(){return r.apply(this,arguments)}}else{e=t(r)}n.call(e);return e});u("seq",function(){return arguments[arguments.length-1]});var a=function(r,n){var t=function(){return r.apply(this,arguments)};t.prototype=r.prototype;t.be=function(n){return n instanceof r};t.formMatch=function(r,n){return function(e){if(t.be(e))return r(e);else return n(e)}};if(n)n.call(t,r,t);t.__=r;t.toString=function(){return"function () { [Moe Wrapped Native Type] }"};return t};u("_Object",Object);u("Object",a(Object,function(){this.be=function(r){return r!==undefined};this.getPrototypeOf=Object.getPrototypeOf;this.getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;this.getOwnPropertyNames=Object.getOwnPropertyNames;this.create=Object.create;this.defineProperty=Object.defineProperty;this.defineProperties=Object.defineProperties;this.seal=Object.seal;this.freeze=Object.freeze;this.preventExtensions=Object.preventExtensions;this.isSealed=Object.isSealed;this.isFrozen=Object.isFrozen;this.isExtensible=Object.isExtensible;this.keys=Object.keys}));u("Array",a(Array,function(){this.formMatch=function(r,n){return function(t){if(t instanceof Array&&t.length>=r.length-1){return r.apply(null,t.slice(0,r.length-1).concat([t.slice(r.length-1)]))}else{return n(t)}}};this.isArray=this.be}));u("Function",a(Function));u("Number",a(Number,function(){this.be=function(r){return typeof r==="number"||r instanceof Number};this.convertFrom=function(r){return r-0}}));u("Boolean",a(Boolean,function(){this.be=function(r){return r===true||r===false};this.convertFrom=function(r){return!!r}}));u("String",a(String,function(){this.be=function(r){return typeof r==="string"||r instanceof String};this.convertFrom=function(r){return r+""}}));u("Error",a(Error));u("Date",Date);u("RegExp",a(RegExp,function(){var r=this;r.convertFrom=function(r){return RegExp(r)};var n=function(n){r[n]=function(r){return RegExp(r,n)};r[n].convertFrom=function(r){return RegExp(r,n)}};n("g");n("i");n("m");n("gi");n("gm");n("im");n("gim");r.walk=function(r,n,t,e){var u=r.lastIndex;r.lastIndex=0;t=t||function(){};e=e||function(){};var i,o=0;while(i=r.exec(n)){if(o<i.index)e(n.slice(o,i.index));if(t.apply(this,i))e.apply(this,i);o=r.lastIndex}if(o<n.length)e(n.slice(o));r.lastIndex=u;return n}}));u("Primitive",function(){var r=function(){};var n=function(){var r=function(r){var n=r.charCodeAt(0);return"\\x"+(n>15?n.toString(16):"0"+n.toString(16))};return function(n){return'"'+(n||"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/[\x00-\x1f\x7f]/g,r).replace(/<\/(script)>/gi,"</$1>")+'"'}}();r.be=function(r){return!r||typeof r==="number"||typeof r==="string"||typeof r==="boolean"};r.stringify=function(r){if(typeof r==="string")return n(r);else return""+r};return r}());if(typeof console==="undefined"){console={log:function(){}}}var f=function(r){var n="";for(var t=0;t<arguments.length;t++)n+=arguments[t];console.log(n);return arguments[arguments.length-1]};if(typeof process!=="undefined"&&process.stderr){f=function(r){var n="";for(var t=0;t<arguments.length;t++)n+=arguments[t];process.stderr.write(n+"\n");return arguments[arguments.length-1]}}u("trace",f);u("instanceof",function(r){return{be:function(n){return n instanceof r}}});u("keysof",Object.keys||function(){var r=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=t.length;return function(u){if(typeof u!="object"&&typeof u!="function"||u===null)throw new TypeError("Object.keys called on a non-object");var i=[];for(var o in u){if(r.call(u,o))i.push(o)}if(n){for(var a=0;a<e;a++){if(r.call(u,t[a]))i.push(t[a])}}return i}}());u("defaultMonadSchemata",n.runtime.MONAD_SCHEMATA_M);(function(){var t=n.runtime;var e;var u=t.CNARG;var i=t.M_TOP;var o=t.MONAD_SCHEMATA_M;var a=t.OWNS;var f=t.RETURNVALUE;var c=t.RMETHOD;var s=t.SLICE;var v=t.THROW;var l=t.NEGATE;var h=t.NOT;var p=t.IN;var g=t.IS;var y=t.AS;var m=t.SCHEMATA_BLOCK;var d=t.UNIQ;var b=t.YIELDVALUE;var E=t.RANGE_EX;var w=t.RANGE_INCL;var A=t.NamedArguments;var O=t.NARGS;var N=t.NARGS0;var T=t.NARGS1;var S=t.NARGS2;var R=t.NARGS3;var j=t.NARGS4;var M=t.GET_ENUM;var _=r;var x=n;var G=[];var I={};var P,C,L,U,D,F,k,H,Y,W,V,z,B,$,q,J,K,Q,X,Z,rn,nn,tn,en,un,on,an,fn,cn,sn,vn,ln,hn,pn,gn,yn,mn,dn,bn,En,wn,An,On,Nn,Tn,Sn,Rn,jn,Mn,_n;X=_.derive;W=_.Object;k=_.Function;mn=_.object;un=_.global_;V=_.Primitive;P=_.Array;L=_.Date;ln=_.keysof;$=_.RegExp;_n=_.type;fn=_["instanceof"];yn=_.math;H=x.runtime.MONAD_SCHEMATA_M;Y=x.runtime.OWNS;q=x.runtime.YIELDVALUE;z=x.runtime.RETURNVALUE;nn=function(r){return function(n){return _[r]=n}};cn=nn("its")(function(r){return function(n){return n[r]}});An=nn("returns")(function(r){return function(){return r}});sn=nn("itself")(function(r){return r});K=nn("composite")(function(r,n){return function(){var t=this;var e=s(arguments,0);return r(n.apply(t,e))}});Z=nn("doon")(function(r,n){return n.call(r)});jn=nn("tee")(function(r,n){n.call(r,r);return r});hn=nn("list")(mn(function(){var r=this;var n;r.car=function(r){return r[0]};r.cdr=function(r){return r.slice(1)};r.initial=function(r){return r.slice(0,-1)};r.last=function(r){return r[r.length-1]};n=function(r,n){return r.concat(n)};r.flat=function(r){return r.reduce(n,[])};r.fill=function(r,n){return Sn({build:function(t){return function(){var e,u,i,o,a,f;var c;e=function(){o=r;return t.bind(o,a)};a=function(r){c=r;return u(n)};u=function(r){return t["return"](r)};return e}}})};r.tolist=function(r){return Sn({build:function(n){return function(){var t,e,u,i,o,a;var f;t=function(){i=r;return n.bind(i,o)};o=function(r){f=r;return e(f)};e=function(r){return n["return"](r)};return t}}})};return r.shuffle=function(r){var n;var t,e,u,i;t=r.slice(0);for(e=0,n=t.length;e<n;e=e+1){u=yn.randInt(e,t.length);i=t[e];t[e]=t[u];t[u]=i}return t}}));dn=nn("pcl")(function(r){var n=s(arguments,0);var t;t=n.slice(1);return function(){var n=this;var e=s(arguments,0);return r.apply(n,t.concat(e))}});dn=nn("pcr")(function(r){var n=s(arguments,0);var t;t=n.slice(1);return function(){var n=this;var e=s(arguments,0);return r.apply(n,e.concat(t))}});Mn=nn("time")(function(r,n){var t,e;e=new L;n.apply(null,r);t=new L;return t-e});(function(){var r,n,t,e;t=/^[a-zA-Z_$][\w$]*$/;e=function(r){return t.test(r)?r:V.stringify(r)};n=function(n,t,u,i){var o,a;var f,c,s,v,l;f=[];for(v=(o=M(ln(n))).emit();o.active;v=o.emit()){l=n[v];c=false;for(s=(a=M(t)).emit();a.active;s=a.emit()){if(s===l){c=true;break}}if(c){f.push(e(v)+": "+"[Circular]")}else{f.push(e(v)+": "+r(l,t,u+1,i))}}return u===0?" "+f.join(",\n  ")+" ":f.join(", ")};r=function(r,t,e,u){if(e>=u){return"[...]"}else{if(g(r,V)){return V.stringify(r)}else{if(g(r,k)){return"{ [Function]\n "+n(r,t.concat([r]),e,u)+"}"}else{return"["+n(r,t.concat([r]),e,u)+"]"}}}};return an=nn("inspect")(function(n,t){var e=s(arguments,0);if(e.length<2){t=3}return r(n,[],0,t)})})();rn=nn("enumeration")(function(r){return function(){var n=this;var t=s(arguments,0);var e,u,i,o,a;a=n;e=t;u={emit:function(){var r=this;var n=s(arguments,0);return i.apply(r,n)},active:true};(function(){var n,t,e;e=function(r){u.active=false;return r};n=function(r,n){i=n;return r};t=function(r,t,e,u){var i=s(arguments,0);return n(r.call(t,e),i[i.length-1])};return o=r.build({"return":e,bind:n,bindYield:t})})();i=o.apply(a,e);return u}});rn.yield=function(r){return r};F=nn("Enumerable")(function(r){return function(){var n=this;var t=s(arguments,0);var e,u,i;i=n;e=t;u=function(){var n,t,u;n={emit:function(){var r=this;var n=s(arguments,0);return t.apply(r,n)},active:true};(function(){var e,i,o;o=function(r){n.active=false;return r};e=function(r,n){t=n;return r};i=function(r,n,t,u){var i=s(arguments,0);return e(r.call(n,t),i[i.length-1])};return u=r.build({"return":o,bind:e,bindYield:i})})();t=u.apply(i,e);return n};return{getEnumerator:u}}});en=nn("getEnumeratorOf")(x.runtime.GET_ENUM);wn=nn("rangeForEach")(function(r,n){var t,e;t=en(r);if(t.each){return t.each(n)}else{e=t.emit();while(!t.stop){n(e);e=t.emit()}}});Rn=nn("takeWhile")(F({build:function(r){return function(n,t){var u,i,o,a,f,c,s,v,l,h;var p;i=function(){p=(u=M(n)).emit();return f()};f=function(){if(!u.active){return c()}if(!!t(p)){return s()}return o(e)};s=function(){v=p;return r.bind(v,l)};l=function(r){p=u.emit();return f()};c=function(){return o()};o=function(n){return r["return"](n)};return i}}}));On=nn("select")(F({build:function(r){return function(n,t){var e,u,i,o,a,f,c,s,v,l;var h;u=function(){h=(e=M(n)).emit();return a()};a=function(){if(!e.active){return f()}if(!t(h)){return c()}s=h;return r.bind(s,v)};v=function(r){return c()};c=function(){h=e.emit();return a()};f=function(){return i()};i=function(n){return r["return"](n)};return u}}}));bn=nn("pairsof")(F({build:function(r){return function(n){var t,e,u,i,o,a,f,c,s;var v;e=function(){v=(t=M(ln(n))).emit();return o()};o=function(){if(!t.active){return a()}f=[n[v],v];return r.bind(f,c)};c=function(r){v=t.emit();return o()};a=function(){return u([])};u=function(n){return r["return"](n)};return e}}}));Sn=nn("table")(function(r){var n=this;var t=s(arguments,0);var u,i;u=[];i=mn(H,function(){var r=this;r["return"]=function(r){var n;if((n=r)===e){}else{return u.push(r)}};return r.bind=function(r,n){return wn(r,n)}});r.build(i).apply(n,t)();return u});on=nn("hash")(function(r){var n;var t,e;t={};for(e=(n=M(r)).emit();n.active;e=n.emit()){t[e[0]]=t[e[1]]}return t});B=function(r,n){return function(t,u){if(t){return n(t,e)}else{return r(null,u)}}};Q=function(r,n){var t=s(arguments,0);var u;if(t.length<2){n=r}u=X(H);u.bind=function(n,t){return n(function(n,u){var i;if(n){return r(n,e)}else{try{return t(u)}catch(o){i=o;return r(i,e)}}})};u.bindYield=function(n,t){var u=s(arguments,0);var i,o;o=function(n,t){var u;if(n){return r(n,e)}else{try{return i(t)}catch(o){u=o;return r(u,e)}}};i=u[u.length-1];return n.apply(t,u.slice(2,-1).concat([o]))};u["try"]=function(t,u,i){var o,a,f,c,s;f=function(r,n){var t;if(r){try{return u(o)(r)}catch(a){t=a;return c(t,e)}}else{return i(n)}};s=Q(f,n);c=function(n,t){if(n){return r(n,e)}else{return i(t)}};o=Q(c,n);try{return t(s)()}catch(v){a=v;return f(a,e)}};u["return"]=function(n){return r(null,n)};return u};J=nn("async")(function(r){if(r.build){return function(){var n=this;var t=s(arguments,0);var e,u,i;e=t.slice(0,-1);i=n;u=t[t.length-1];return r.build(Q(u)).apply(i,e)()}}else{return function(){var n=this;var t=s(arguments,0);var u,i,o,a,f;f=n;u=t.slice(0,-1);a=t[t.length-1];try{o=r.apply(f,u)}catch(c){i=c;return a(i,e)}return a(null,o)}}});J.defaultReaction=function(r,n){if(r){return v(r)}else{return n}};Tn=nn("start")(function(r){var n=this;var t=s(arguments,0);return r.apply(n,t.slice(1).concat([J.defaultReaction]))});vn=nn("join")(function(r,n){var t,u,i,o,a,f;o=0;a=0;u=false;f=g(r,P)?[]:{};t=function(r){var t,i;i=function(t){f[r]=t;a=a+1;if(!u&&a>=o){return n(null,f)}};t=function(r){u=true;return n(r,e)};return B(i,t)};i=W.keys(r);if(!i.length){n(null,f)}o=i.length;return wn(i,function(n){f[n]=e;return r[n](t(n))})});En=nn("qjoin")(J({build:function(r){return function(n,t){var e,u,i,o,a,f,c,s,v,l;var h,p;o=function(){p=[];for(h=0,e=n;h<e;h=h+1){p[h]=[]}for(h=0,u=t.length;h<u;h=h+1){p[h%n].push(t[h])}for(h=0,i=n;h<i;h=h+1){(function(){var r;r=p[h];return p[h]=J({build:function(n){return function(){var t,e,u,i,o,a,f,c,s,v;var l;e=function(){l=0,t=r.length;return o()};o=function(){if(!(l<t)){return a()}f=r;c=l;return n.bindYield(f[c],f,s)};s=function(r){l=l+1;return o()};a=function(){return u()};u=function(r){return n["return"](r)};return e}}})})()}c=vn;s=p;return r.bindYield(c,null,s,v)};v=function(r){return a(r)};a=function(n){return r["return"](n)};return o}}}));Nn=nn("sleep")(function(r,n){return un.setTimeout(function(){return n()},r)});gn=function(r){var n,t;n=function(r){return e};t=mn(H,function(){var r=this;return r.bindYield=function(r,t,e,u){u();n=r.formMatch.call(t,e,n)}});r.build(t)()();return n};pn=nn("match")(function(r,n){return!n?gn(r):gn(n)(r)});tn=nn("extractor")(function(r){var n;n=r(function(){return true},function(){return false});n.formMatch=r;n.be=n;return n});C=nn("Both")(function(){var r=s(arguments,0);var n;n=r;return tn(function(r,t){return n.reduceRight(function(r,n){return n.formMatch(r,t)},r)})});U=nn("Either")(function(){var r=s(arguments,0);var n;n=r;return tn(function(r,t){return n.reduceRight(function(n,t){return t.formMatch(r,n)},t)})});D=nn("empty")(nn("Empty")(tn(function(r,n){return function(t){return!t||g(t,P)&&!t.length?r(t):n(t)}})))})();return r}();